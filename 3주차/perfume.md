## 6. 객체와 자료 구조

객체 지향 프로그래밍을 공부하다보면 "추상화", "캡슐화" 같은 단어를 반드시 접하게 됩니다. 이 책의 6장에서도 이와 관련된 개념들을 볼 수 있는데요. (사실 개인적으로 6장이 어려웠어서 제가 제대로 이해한지 모르겠습니다!)

먼저 6장의 제목이 된 객체와 자료 구조 이 둘은 사실상 정반대의 개념입니다.

> **객체:** 추상화를 통해 자료를 숨긴 채 자료를 다루는 **함수만 공개**합니다.
> **자료 구조:** **자료를 그대로 공개**하며 별다른 함수는 제공하지 않습니다.

이 둘의 차이에서 객체지향 프로그래밍과 절차형 프로그래밍이 양분됩니다. 자료구조를 사용하는 절차적인 코드는 기존 자료 구조를 변경하지 않으면서 새 함수를 추가하기 쉽습니다. 하지만 새로운 자료 구조를 추가하긴 어렵습니다. 반면 객체 지향 코드는 기존 함수를 변경하지 않으면서 새 클래스를 추가하긴 쉽지만, 새로운 함수를 추가하려면 모든 클래스를 고쳐야 합니다.

그렇기 때문에 둘은 상황에 따라 적합한 것을 선택하여 사용하는 것이 좋습니다.

### 디미터 법칙

디미터 법칙이란 모듈이 자신이 조작하는 객체의 속사정을 몰라야 한다는 법칙입니다. 예를 들어 클래스 C의 메서드 f는 아래와 같은 객체의 메서드만 호출해야 합니다.

> 클래스 C
> f가 생성한 객체
> f 인수로 넘어온 객체
> C 인스턴스 변수에 저장된 객체

왜일까요? 바로 객체들의 결합도를 낮추기 위해서 입니다. 좋은 소프트웨어 설계는 높은 응집도와 낮은 결합도를 가집니다. 디미터 법칙은 결국 낮은 결합도를 추구하는 것입니다.

## 10. 클래스

앞서 살폈던 함수처럼, 좋은 클래스를 판별하는 가장 중요한 척도는 "크기"입니다. 클래스는 가능한 작게 만드는 것이 좋습니다. 함수는 물리적인 행의 수로 크기를 측정했습니다. 클래스는 이와 달리 "맡은 책임"을 기준으로 크기를 측정한다는 점이 다릅니다. 책임이란 말이 조금 어려울 수 있는데요. 아래 예시를 보면 이해에 도움이 될 거에요.

![](https://velog.velcdn.com/images/perfumellim/post/143ac911-5b70-4089-9996-5833f9c0b28c/image.png)

이 `StockPortfolioManager`라는 클래스는 너무 많은 책임을 감당하고 있습니다. 이 클래스가 하는 일을 여러 클래스로 분산시켜주는 것이 좋습니다. 아래 이미지처럼요.

![](https://velog.velcdn.com/images/perfumellim/post/e8718c64-b3b1-4eaa-8941-562edaa927cb/image.png)
이미지 출처: [Mihai Sandu's Medium](https://levelup.gitconnected.com/the-single-responsibility-principle-made-simple-4e1597a44d7d)

자신이 만든 클래스가 적절한 책임을 지고 있는지 확인하는 가장 직관적인 방법은 클래스의 이름을 생각해보는 것입니다. 클래스의 이름은 해당 클래스가 맡은 책임을 설명할 수 있어야 하는데요. 클래스의 이름이 모호하다면 이 클래스가 맡은 책임이 너무 많다는 뜻입니다. 간결한 이름이 떠오르지 않는 것 역시 마찬가지 입니다.

### 단일 책임 원칙(SRP)

책임은 즉, 클래스나 모듈을 변경할 이유를 뜻하는데요. 단일 책임 원칙은 클래스를 변경할 이유가 하나여야 한다는 원칙입니다. 객체 지향 설계에서 특히나 중요한 개념입니다. 책임을 파악하려고 애쓰다 보면 코드를 추상화하기도 쉬워집니다. 앞서 봤던 `StockPortfolioManager` 처럼요.

커다란 하나의 클래스보다 작은 클래스 여럿으로 이뤄진 시스템이 바람직합니다. 작은 클래스는 각자 맡은 책임이 하나며, 다른 작은 클래스와 협력해 시스템에 필요한 동작을 수행합니다. 큰 서랍 하나보다는 용도별로 작은 서랍에 나눠놓는 게 필요한 물건을 찾기 더 좋은 것처럼요.

![](https://velog.velcdn.com/images/perfumellim/post/ec021a43-a715-4b76-9e16-a9665c2a3b90/image.png)
이미지 출처: [Allrecipes](https://www.allrecipes.com/article/the-allrecipes-kitchen-organization-challenge-day-1-junk-drawer-makeover/)

![](https://velog.velcdn.com/images/perfumellim/post/c723a8d8-6dbc-42cc-87b9-d4e05419f32f/image.png)
이미지 출처: [spruce crafts](https://www.thesprucecrafts.com/best-craft-organizers-5087877)

### 응집도

앞서 디미터 법칙에서 말했던 것처럼, 결합도는 낮고 응집도는 높은 것이 좋은 프로그래밍 설계입니다.
